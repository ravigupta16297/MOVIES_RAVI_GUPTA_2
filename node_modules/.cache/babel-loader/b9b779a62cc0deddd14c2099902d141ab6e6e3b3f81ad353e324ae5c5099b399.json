{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Apple\\\\OneDrive\\\\Desktop\\\\ravi\\\\movies_ravi_gupta_2\\\\src\\\\compo\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Cards from './Cards';\nimport Pagination from './Pagination';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { search } from '../action';\nimport Spin from './Spin';\nimport Details from './Details';\nimport { currPage } from '../action';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Home = props => {\n  _s();\n  const [page, setPage] = useState(1);\n  const result = useSelector(state => state.searchFilter);\n  //const text=useSelector((state)=> state.searchNow);\n  let dispatch = useDispatch();\n  const [list, setList] = useState([]);\n  const [totpage, SetTotpage] = useState(0);\n  const [detail, setDetail] = useState(false);\n  useEffect(() => {\n    const fetchdata = async () => {\n      props.setLoading(true);\n      try {\n        var _result$results;\n        let api_key = \"c4d65bd09eb48ec4e0ff20d5d3f92766\";\n        let url = `https://api.themoviedb.org/3/movie/upcoming?language=en-US&page=${page}`;\n        let acc_token = \"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjNGQ2NWJkMDllYjQ4ZWM0ZTBmZjIwZDVkM2Y5Mjc2NiIsInN1YiI6IjY0ZGE1MTA4YmYzMWYyMDFjYjZiYTdmNCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.vEkoOADwfNLZclJZp0MyZGU_3_49Tsm5eB8pjDvrfi8\"; // Replace with your actual access token\n\n        let headers = {\n          'Authorization': `Bearer ${acc_token}`,\n          'accept': 'application/json'\n        };\n        let response = await fetch(url, {\n          method: \"GET\",\n          headers: headers\n        });\n        let data = await response.json();\n        if (((_result$results = result.results) === null || _result$results === void 0 ? void 0 : _result$results.length) > 0) {\n          dispatch(currPage(page));\n          SetTotpage(result.total_pages);\n          if (result.page === page) {\n            result.results.sort((a, b) => {\n              let date1 = new Date(a.release_date);\n              let date2 = new Date(b.release_date);\n              return date1 - date2;\n            });\n            setList(result.results);\n            props.setLoading(false);\n          }\n        } else {\n          dispatch(currPage(page));\n          SetTotpage(data.total_pages);\n          dispatch(search(data.results));\n          data.results.sort((a, b) => {\n            let date1 = new Date(a.release_date);\n            let date2 = new Date(b.release_date);\n            return date1 - date2;\n          });\n          setList(data.results);\n          props.setLoading(false);\n        }\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n      }\n    };\n    fetchdata();\n  }, [page, result]);\n  const paginate = val => {\n    setPage(val);\n    props.setLoading(true);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [detail && /*#__PURE__*/_jsxDEV(Details, {\n      setDetail: setDetail\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 24\n    }, this), props.loading && /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 31\n    }, this), !props.loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row m-4\",\n        children: list.map((ele, id) => {\n          return /*#__PURE__*/_jsxDEV(Cards, {\n            img: ele.poster_path,\n            title: ele.title,\n            desc: ele.overview,\n            rating: ele.vote_average,\n            id: ele.id,\n            setDetail: setDetail\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 32\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 38\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"footer\",\n        style: {\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(Pagination, {\n          tpage: totpage,\n          currpage: page,\n          setPage: setPage,\n          paginate: paginate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 32\n    }, this)]\n  }, void 0, true);\n};\n_s(Home, \"0mafiPN9kDlIxvs68k5kY0wjZhU=\", false, function () {\n  return [useSelector, useDispatch];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","Cards","Pagination","useSelector","useDispatch","search","Spin","Details","currPage","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","props","_s","page","setPage","result","state","searchFilter","dispatch","list","setList","totpage","SetTotpage","detail","setDetail","fetchdata","setLoading","_result$results","api_key","url","acc_token","headers","response","fetch","method","data","json","results","length","total_pages","sort","a","b","date1","Date","release_date","date2","error","console","paginate","val","children","fileName","_jsxFileName","lineNumber","columnNumber","loading","className","map","ele","id","img","poster_path","title","desc","overview","rating","vote_average","style","textAlign","tpage","currpage","_c","$RefreshReg$"],"sources":["C:/Users/Apple/OneDrive/Desktop/ravi/movies_ravi_gupta_2/src/compo/Home.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport Cards from './Cards';\r\nimport Pagination from './Pagination';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { search } from '../action';\r\nimport Spin from './Spin';\r\nimport Details from './Details';\r\nimport { currPage } from '../action';\r\n\r\nconst Home = (props) => {\r\n    const [page, setPage] =useState(1);\r\n    const result = useSelector((state) => state.searchFilter);\r\n    //const text=useSelector((state)=> state.searchNow);\r\n    let dispatch = useDispatch();\r\n    const [list, setList] = useState([]);   \r\n    const [totpage, SetTotpage] = useState(0);\r\n    const [detail, setDetail] = useState(false);\r\n    \r\n    \r\n\r\n    useEffect(() => {\r\n        const fetchdata = async () => {\r\n            props.setLoading(true)\r\n            try {\r\n\r\n                let api_key = \"c4d65bd09eb48ec4e0ff20d5d3f92766\";\r\n                let url = `https://api.themoviedb.org/3/movie/upcoming?language=en-US&page=${page}`; \r\n                let acc_token = \"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjNGQ2NWJkMDllYjQ4ZWM0ZTBmZjIwZDVkM2Y5Mjc2NiIsInN1YiI6IjY0ZGE1MTA4YmYzMWYyMDFjYjZiYTdmNCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.vEkoOADwfNLZclJZp0MyZGU_3_49Tsm5eB8pjDvrfi8\"; // Replace with your actual access token\r\n\r\n                let headers = {\r\n                    'Authorization': `Bearer ${acc_token}`,\r\n                    'accept': 'application/json'\r\n                };\r\n                let response = await fetch(url, { method: \"GET\", headers: headers });\r\n                let data = await response.json();\r\n               \r\n                 if(result.results?.length>0)\r\n                 {\r\n                    dispatch(currPage(page));\r\n                    SetTotpage(result.total_pages);\r\n                    if(result.page === page )\r\n                    {\r\n                    result.results.sort((a, b) => {\r\n                        let date1 = new Date(a.release_date);\r\n                        let date2 = new Date(b.release_date);\r\n                        return date1 - date2;\r\n                    });\r\n                    setList(result.results);\r\n                    props.setLoading(false);\r\n                 }\r\n                }\r\n                else\r\n                {     \r\n                    dispatch(currPage(page));\r\n                    SetTotpage(data.total_pages)\r\n                    dispatch(search(data.results));            \r\n                    data.results.sort((a, b) => {\r\n                        let date1 = new Date(a.release_date);\r\n                        let date2 = new Date(b.release_date);\r\n                        return date1 - date2;\r\n                    });\r\n                    setList(data.results);\r\n                    props.setLoading(false);\r\n                }\r\n                \r\n\r\n            } catch (error) {\r\n                console.error(\"Error fetching data:\", error);\r\n            }\r\n        };\r\n        fetchdata();\r\n    }, [page,result]);\r\n\r\n    const paginate = (val) => {\r\n        setPage(val);\r\n        props.setLoading(true);\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            {detail && <Details setDetail={setDetail} />}\r\n            {props.loading && <Spin />}\r\n            {!props.loading && <div> <div className='row m-4'>\r\n                {\r\n                    list.map((ele, id) => {\r\n                        return <Cards key={id} img={ele.poster_path} title={ele.title}\r\n                            desc={ele.overview} rating={ele.vote_average} id={ele.id} setDetail={setDetail} />\r\n                    })\r\n                }\r\n            </div>\r\n\r\n                <div className='footer' style={{ textAlign: 'center' }}>\r\n                    <Pagination tpage={totpage} currpage={page} setPage={setPage} paginate={paginate} />\r\n                </div>\r\n            </div>}\r\n        </>\r\n\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default Home"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}